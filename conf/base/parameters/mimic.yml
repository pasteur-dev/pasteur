mimic_mm_core:
  tables:
    patients:
      primary_key: subject_id
      fields:
        subject_id: id
        gender: categorical
        # year_group: categorical
        dod: date?:birth_year
        birth_year: fixed|date

    admissions:
      primary_key: hadm_id
      fields:
        hadm_id: id
        subject_id: id:patients.subject_id
        admittime:
          type: datetime
          span: year.hour
          ref:
            table: patients
            col: bith_year
          max_len: 99
          bins: 100
        dischtime: datetime|day.hour:admittime
        deathtime: datetime?|day.hour:admittime
        admission_type: categorical
        admission_location: categorical?
        discharge_location: categorical?
        insurance: categorical
        language: categorical
        marital_status: categorical?
        ethnicity: categorical
        # edregtime: datetime?|day.halfhour:admittime
        # edouttime: datetime?|day.halfhour:admittime
        hospital_expire_flag: categorical

    transfers:
      primary_key: transfer_id
      fields:
        transfer_id: id
        hadm_id: id:admissions.hadm_id
        eventtype: categorical
        careunit: categorical?
        intime: datetime|day.hour:admissions.admittime
        outtime: datetime?|day.hour:intime

mimic_tab_admissions:
  tables:
    table:
      primary_key: hadm_id
      fields:
        hadm_id: id

        birth_year: fixed|date
        dod:
          type: date
          span: year
          ref: birth_year
          nullable: True
          max_len: 99
          bins: 32

        admittime:
          type: datetime
          span: year.hour
          ref: birth_year
          max_len: 99
          bins: 32
        dischtime: datetime|day.hour:admittime
        deathtime: datetime?|day.hour:admittime

        # edregtime: datetime?|day.:admittime
        # edouttime: datetime?|day.:admittime

        admission_type: categorical
        admission_location: categorical?
        discharge_location: categorical?
        insurance: categorical
        language: categorical
        marital_status: categorical?
        ethnicity: categorical
        hospital_expire_flag: categorical
        gender: categorical
